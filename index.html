<html>
<head>
    <title>Unbl0cker Portal</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Docs favicon -->
    <link rel="icon" type="image/png" href="https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.png">
    <style id="theme-style">
        :root {
            --accent: #7f5af0;
            --accent2: #232946;
            --bg: #181824;
            --bg-light: #232946;
            --text: #fff;
            --text-light: #e0e0e0;
            --btn-bg: linear-gradient(90deg, #232946 0%, #181824 100%);
            --btn-hover: linear-gradient(90deg, #181824 0%, #232946 100%);
            --radius: 18px;
            --shadow: 0 8px 32px 0 rgba(127,90,240,0.10);
        }
        body {
            background: var(--bg);
            min-height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', 'Inter', Arial, sans-serif;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: background 0.7s cubic-bezier(.4,2,.6,1), color 0.5s;
        }
        body::before {
            content: "";
            position: fixed;
            z-index: 0;
            left: 0; top: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            background: radial-gradient(circle at 20% 30%, #7f5af033 0%, transparent 60%),
                        radial-gradient(circle at 80% 70%, #2cb67d33 0%, transparent 60%),
                        linear-gradient(120deg, #232946 0%, #181824 100%);
            animation: bgmove 12s linear infinite alternate;
        }
        @keyframes bgmove {
            0% { background-position: 20% 30%, 80% 70%, 0 0; }
            100% { background-position: 30% 40%, 70% 60%, 100% 100%; }
        }
        .container {
            background: var(--bg-light);
            padding: 36px 28px 28px 28px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            min-width: 320px;
            max-width: 95vw;
            width: 370px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            border: 1.5px solid var(--accent2);
            position: relative;
        }
        h1 {
            margin: 0 0 10px 0;
            font-size: 2.1em;
            letter-spacing: 2px;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(90deg, #7f5af0 0%, #2cb67d 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        label {
            font-size: 1.08em;
            margin-bottom: 8px;
            color: var(--text-light);
            letter-spacing: 0.5px;
            display: block;
            text-align: left;
            width: 100%;
        }
        input[type="text"] {
            width: 100%;
            padding: 13px 14px;
            border-radius: 10px;
            border: 1.5px solid var(--accent);
            margin-bottom: 10px;
            font-size: 1.08em;
            background: #181824;
            color: var(--text);
            box-sizing: border-box;
            outline: none;
            transition: border 0.3s, background 0.3s;
        }
        input[type="text"]:focus {
            border: 1.5px solid #7f5af0;
            background: #232946;
        }
        .btn {
            width: 100%;
            max-width: 350px;
            display: block;
            margin: 18px auto 0 auto;
            padding: 20px 0;
            font-size: 1.18em;
            border: none;
            border-radius: 14px;
            background: var(--btn-bg);
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            letter-spacing: 1.5px;
            box-shadow: 0 4px 24px 0 rgba(40,40,60,0.18), 0 1.5px 0 0 var(--accent2) inset;
            position: relative;
            overflow: hidden;
            transition: 
                background 0.3s, 
                color 0.3s, 
                box-shadow 0.3s, 
                transform 0.18s;
        }
        .btn::before {
            content: "";
            position: absolute;
            left: -50%;
            top: 0;
            width: 200%;
            height: 100%;
            background: linear-gradient(120deg, transparent 0%, rgba(40,40,60,0.13) 50%, transparent 100%);
            opacity: 0.7;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        .btn:hover, .btn:focus {
            background: var(--btn-hover);
            color: #fff;
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 8px 32px 0 rgba(40,40,60,0.22);
        }
        .btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px 0 rgba(40,40,60,0.13);
        }
        .switch-btn {
            margin-bottom: 8px;
            padding: 7px 18px;
            border-radius: 8px;
            border: none;
            background: #232946;
            color: var(--accent);
            font-weight: 500;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s, color 0.3s;
            align-self: flex-end;
        }
        .switch-btn.light {
            background: #e0e0e0;
            color: #7f5af0;
        }
        .theme-picker {
            margin-bottom: 8px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .theme-color {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--accent2);
            cursor: pointer;
            outline: none;
            transition: border 0.3s, transform 0.2s;
            background: #232946;
        }
        .theme-color.selected {
            border: 3px solid var(--accent);
            transform: scale(1.18);
        }
        ul.button-list {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0;
        }
        @media (max-width: 500px) {
            .container {
                padding: 14px 2vw 14px 2vw;
                width: 98vw;
            }
            h1 { font-size: 1.3em; }
            .btn { font-size: 1em; padding: 14px 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <button id="themeSwitcher" class="switch-btn" onclick="toggleTheme()">Switch to Light Mode</button>
        <div class="theme-picker">
            <button class="theme-color" style="background:linear-gradient(135deg,#232526 0%,#414345 100%);" title="Default Dark" data-theme="dark"></button>
            <button class="theme-color" style="background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);" title="Default Light" data-theme="light"></button>
            <button class="theme-color" style="background:linear-gradient(135deg,#1e3c72 0%,#2a5298 100%);" title="Blue" data-theme="blue"></button>
            <button class="theme-color" style="background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);" title="Peach" data-theme="peach"></button>
            <button class="theme-color" style="background:linear-gradient(135deg,#c471f5 0%,#fa71cd 100%);" title="Purple" data-theme="purple"></button>
        </div>
        <h1>Unblocker Portal</h1>
        <p style="color:#ffb86c; background:rgba(127,90,240,0.08); border-radius:8px; padding:10px 16px; margin-bottom:10px; font-size:1em; text-align:center;">
            <b>Warning:</b> Some sites may not work directly here. If a site doesn't load, try using one of the unblockers below!
        </p>
        <label for="gameUrl" style="display:none;">Enter game URL:</label>
        <input type="text" id="gameUrl" placeholder="https://example.com" style="display:none;">
        <ul class="button-list">
            <li>
                <p style="color:#ffb86c; background:rgba(127,90,240,0.08); border-radius:8px; padding:8px 12px; margin-bottom:10px; font-size:0.98em; text-align:center;">
                    <b>Note:</b> Utopia may have invisible ads that redirect you. If you click and it opens a tab, just close the new tab and go back.
                </p>
                <button id="btn1" class="btn" onclick="openSpecific('https://utopiaweb.org/')" style="display:none;">
                    <span style="vertical-align:middle; margin-right:8px;">ü™ê</span>Open Utopia
                </button>
            </li>
            <li>
                <button id="btn2" class="btn" onclick="openSpecific('https://ramnetos.github.io/RamOS/html/dogeub4.html')" style="display:none;">
                    <span style="vertical-align:middle; margin-right:8px;">üêï</span>Open Doge
                </button>
            </li>
            <li>
                <button id="btn3" class="btn" onclick="openSpecific('https://browser.rammerhead.org/')" style="display:none;">
                    <span style="vertical-align:middle; margin-right:8px;">üåê</span>Open RammerHead
                </button>
            </li>
            <li>
                <button id="btn4" class="btn" onclick="openSpecific('https://edu.defdc.com/')" style="display:none;">
                    <span style="vertical-align:middle; margin-right:8px;">üöÄ</span>Open Intersteller
                </button>
            </li>
            <li>
                <button id="btn5" class="btn" onclick="showBookmarkletsInfo()" style="display:none;">
                    <span style="vertical-align:middle; margin-right:8px;">üîñ</span>Bookmarklets
                </button>
            </li>
        </ul>
        <div style="width:100%; text-align:center; margin-bottom:14px;">
            <button id="randomGameBtn" class="btn" style="max-width:220px; padding:10px 0; font-size:1em;">üé≤ Random Game</button>
            <button id="changelogBtn" class="btn" style="max-width:180px; padding:10px 0; font-size:1em;">Changelog</button>
            <button id="instructionsBtn" class="btn" style="max-width:180px; padding:10px 0; font-size:1em;">Instructions</button>
            <button id="faqBtn" class="btn" style="max-width:180px; padding:10px 0; font-size:1em;">FAQ / Help</button>
        </div>
        <div style="width:100%; margin-bottom:10px;">
            <h3 style="font-size:1.08em; color:var(--accent); margin-bottom:4px;">Pinned Links</h3>
            <ul id="pinnedList" style="list-style:none; padding:0; margin:0; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; align-items:center;"></ul>
        </div>
        <div style="width:100%; margin-bottom:10px;">
            <h3 style="font-size:1.08em; color:var(--accent); margin-bottom:4px;">Favorites</h3>
            <ul id="favoritesList" style="list-style:none; padding:0; margin:0; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; align-items:center;"></ul>
            <h3 style="font-size:1.08em; color:var(--accent); margin:10px 0 4px 0;">Recently Used</h3>
            <ul id="recentList" style="list-style:none; padding:0; margin:0; display:flex; flex-wrap:wrap; gap:8px; justify-content:center; align-items:center;"></ul>
        </div>
        <!-- Changelog Modal -->
        <!-- Update your changelog modal to group the last 3 versions into v2.2 -->
<div id="changelogModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(24,24,36,0.96); z-index:9999; align-items:center; justify-content:center;">
    <div style="background:#232946; color:#fff; padding:32px 28px; border-radius:16px; box-shadow:0 8px 32px 0 rgba(127,90,240,0.15); max-width:95vw; width:370px; text-align:left;">
        <h2 style="margin-top:0; text-align:center;">Changelog</h2>
        <div style="line-height:1.4; font-size:1em; max-height:320px; overflow-y:auto; width:100%; margin-bottom:18px;">
            <b>v1.5</b> - Fixed unblocker buttons (Utopia, Doge, RammerHead, Intersteller, Bookmarklets) so they now work!<br>
            <b>v1.4</b> - Added search bar to filter games and tools, FAQ / Help modal, pinned links section, built-in mini-game (Snake), and more!<br>
            <b>v1.3</b> - Added link icons, descriptions, double-click open, alphabetical sorting, changelog, and 5 easter eggs!<br>
            <b>v1.2</b> - Animated backgrounds, link status indicators, custom themes, random game button.<br>
            <b>v1.1</b> - Favorites, recently used, instructions modal, and more.<br>
            <b>v1.0</b> - Added custom unblocker and other unblocking links.<br>
        </div>
        <button onclick="document.getElementById('changelogModal').style.display='none'" class="btn" style="max-width:120px; margin-top:0; display:block; margin-left:auto; margin-right:auto;">Close</button>
    </div>
</div>
        <!-- Instructions Modal -->
        <div id="instructionsModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(24,24,36,0.96); z-index:9999; align-items:center; justify-content:center;">
            <div style="background:#232946; color:#fff; padding:32px 28px; border-radius:16px; box-shadow:0 8px 32px 0 rgba(127,90,240,0.15); max-width:95vw; width:370px; text-align:left; display:flex; flex-direction:column; align-items:center;">
                <h2 style="margin-top:0; text-align:center;">Instructions</h2>
                <div style="line-height:1.4; font-size:1em; max-height:320px; overflow-y:auto; width:100%; margin-bottom:18px;">
                    <b>1. Enter the Password:</b> When you open the portal, you‚Äôll be prompted for a password. Enter the correct password to access all features.<br>
                    <b>2. Using Unblocker Buttons:</b> The top section contains buttons for various unblockers and proxies. Click any button to open the unblocker in a new window.<br>
                    <b>3. Custom Links (Games & Tools):</b> Scroll down to the <b>Custom Links</b> section to find a list of games and tools. Click a game/tool button to open it in a popup window. If a link doesn‚Äôt load, try using one of the unblockers above.<br>
                    <b>4. Favorites:</b> Click the ‚òÜ star next to any custom link to add it to your <b>Favorites</b>. Favorites appear at the top for quick access. Click ‚òÖ to remove from favorites.<br>
                    <b>5. Recently Used:</b> Any custom link you open will appear in the <b>Recently Used</b> section for easy access.<br>
                    <b>6. Instructions:</b> Click the <b>Instructions</b> button to view these instructions at any time.<br>
                    <b>7. About:</b> Click the <b>About</b> button to see information about this portal.<br>
                    <b>8. Bookmarklet Generator:</b> Click the <b>Bookmarklet Generator</b> button to open the generator modal. Paste JavaScript code and click <b>Generate</b> to get a bookmarklet link you can drag to your bookmarks bar.<br>
                    <b>9. Link Validation:</b> If a custom link is faded or says "Link may be down!", it might be offline or blocked.<br>
                    <b>10. Fullscreen Tip:</b> For the best experience, click the three dots in your browser and use the fullscreen button next to the zoom controls. Go fullscreen <u>before</u> opening a game for best proportions.
                </div>
                <button onclick="document.getElementById('instructionsModal').style.display='none'" class="btn" style="max-width:120px; margin-top:0; display:block; margin-left:auto; margin-right:auto;">Close</button>
            </div>
        </div>
        <!-- FAQ Modal -->
        <div id="faqModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(24,24,36,0.96); z-index:9999; align-items:center; justify-content:center;">
            <div style="background:#232946; color:#fff; padding:32px 28px; border-radius:16px; box-shadow:0 8px 32px 0 rgba(127,90,240,0.15); max-width:95vw; width:370px; text-align:left;">
                <h2 style="margin-top:0; text-align:center;">FAQ / Help</h2>
                <div style="line-height:1.4; font-size:1em; max-height:320px; overflow-y:auto; width:100%; margin-bottom:18px;">
                    <b>Q: Why doesn't a game or site load?</b><br>
                    A: Some sites are blocked or require an unblocker. Try using one of the unblocker buttons at the top.<br><br>
                    <b>Q: How do I add a game to favorites?</b><br>
                    A: Click the ‚òÜ star next to a game. It will turn ‚òÖ and appear in your favorites.<br><br>
                    <b>Q: What are the colored dots?</b><br>
                    A: Green means the link is up, red means it may be down.<br><br>
                    <b>Q: How do I unlock secret games?</b><br>
                    A: Some games are hidden as easter eggs!<br><br>
                    <b>Q: How do I change the theme?</b><br>
                    A: Use the color buttons or the "Switch to Light/Dark Mode" button at the top.<br><br>
                    <b>Q: Still need help?</b><br>
                    A: Ask the portal creator or check the About section!
                </div>
                <button onclick="document.getElementById('faqModal').style.display='none'" class="btn" style="max-width:120px; margin-top:0; display:block; margin-left:auto; margin-right:auto;">Close</button>
            </div>
                <h2 style="margin-top:0; text-align:center;">FAQ / Help</h2>
        </div>
        <div style="width:100%; margin-bottom:6px; text-align:center;">
            <input type="text" id="searchBar" placeholder="Search games or tools..." style="width:90%; max-width:320px; padding:10px 14px; border-radius:8px; border:1.5px solid var(--accent); font-size:1em; background:var(--bg-light); color:var(--text); margin-bottom:0;">
        <!-- Add this dropdown menu above the games list, below the search bar and tip/note -->
        <div style="width:100%; margin:10px 0 0 0; text-align:center;">
            <select id="aiToolsDropdown" style="width:92%; max-width:340px; padding:10px 14px; border-radius:8px; border:1.5px solid var(--accent); font-size:1em; background:var(--bg-light); color:var(--text);">
                <option value="">AI Tools ‚ñº</option>
                <option value="https://toolbaz.com/writer/ai-text-generator">AI Text Generator (Toolbaz)</option>
                <option value="https://tinywow.com/tools/">TinyWow AI Tools</option>
                <option value="https://deepai.org/chat">DeepAI Chat</option>
            </select>
        </div>
        <div class="custom-links-section" style="margin-top:12px; width:100%;">
            <h2 style="font-size:1.2em; color:var(--accent); margin-bottom:10px; text-align:center;">Custom Links</h2>
            <ul id="customLinksList" style="
                list-style:none;
                padding:0;
                margin:0;
                display:flex;
                flex-wrap:wrap;
                gap:10px;
                justify-content:center;
                align-items:center;
            "></ul>
        </div>
        <div style="color:#7f5af0; background:rgba(127,90,240,0.08); border-radius:8px; padding:8px 12px; margin-top:10px; margin-bottom:10px; font-size:0.98em; text-align:center;">
            <b>Tip:</b> For the best experience, click the <b>three dots</b> in your browser, then click the <b>fullscreen button</b> next to the zoom controls!<br>
            <b>Note:</b> You may need to go fullscreen <u>before</u> opening a link to make sure the game or site displays in the correct proportions.
        </div>
    </div>
    <script>
        // Replace with your actual Discord webhook URL if needed
        const webhookUrl = "https://discordapp.com/api/webhooks/1375190980294086706/VLETD3zstsZXQHIa13WYmN_QQX1NJ13oCaagPRZ7AiuwrRMyxLXKfW2kHQGGrRPP-JL5";
        const PASSWORD = "yourag"; // Set your password here

        // --- Helper: openInAboutBlank ---
        function openInAboutBlank(url) {
            var win = window.open();
            var iframe = win.document.createElement('iframe');
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.border = "none";
            iframe.src = url;
            win.document.body.style.margin = "0";
            win.document.body.style.padding = "0";
            win.document.body.appendChild(iframe);
        }

        // --- Theme switcher logic ---
        const themePresets = {
            dark: {
                '--accent': '#00ffe7',
                '--accent2': '#1a1a2e',
                '--bg': '#181824',
                '--bg-light': '#232946',
                '--text': '#fff',
                '--text-light': '#e0e0e0',
                '--btn-bg': 'linear-gradient(90deg, #00ffe7 0%, #007cf0 100%)',
                '--btn-hover': 'linear-gradient(90deg, #007cf0 0%, #00ffe7 100%)'
            },
            light: {
                '--accent': '#007cf0',
                '--accent2': '#e0e0e0',
                '--bg': '#f8fafc',
                '--bg-light': '#fff',
                '--text': '#181824',
                '--text-light': '#232946',
                '--btn-bg': 'linear-gradient(90deg, #007cf0 0%, #00ffe7 100%)',
                '--btn-hover': 'linear-gradient(90deg, #00ffe7 0%, #007cf0 100%)'
            },
            blue: {
                '--accent': '#396afc',
                '--accent2': '#223',
                '--bg': '#1e3c72',
                '--bg-light': '#2a5298',
                '--text': '#fff',
                '--text-light': '#e0e0e0',
                '--btn-bg': 'linear-gradient(90deg, #396afc 0%, #2948ff 100%)',
                '--btn-hover': 'linear-gradient(90deg, #2948ff 0%, #396afc 100%)'
            },
            peach: {
                '--accent': '#fcb69f',
                '--accent2': '#ffecd2',
                '--bg': '#fff6f0',
                '--bg-light': '#fff',
                '--text': '#232946',
                '--text-light': '#7f5af0',
                '--btn-bg': 'linear-gradient(90deg, #fcb69f 0%, #ffecd2 100%)',
                '--btn-hover': 'linear-gradient(90deg, #ffecd2 0%, #fcb69f 100%)'
            },
            purple: {
                '--accent': '#c471f5',
                '--accent2': '#fa71cd',
                '--bg': '#2d1436',
                '--bg-light': '#3a1850',
                '--text': '#fff',
                '--text-light': '#e0e0e0',
                '--btn-bg': 'linear-gradient(90deg, #c471f5 0%, #fa71cd 100%)',
                '--btn-hover': 'linear-gradient(90deg, #fa71cd 0%, #c471f5 100%)'
            }
        };

        function setTheme(theme) {
            const preset = themePresets[theme];
            if (!preset) return;
            Object.keys(preset).forEach(key => {
                document.documentElement.style.setProperty(key, preset[key]);
            });
            localStorage.setItem('theme', theme);
            document.querySelectorAll('.theme-color').forEach(btn => {
                btn.classList.toggle('selected', btn.getAttribute('data-theme') === theme);
            });
            document.getElementById('themeSwitcher').textContent = theme === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode';
        }

        function toggleTheme() {
            const current = localStorage.getItem('theme') || 'dark';
            setTheme(current === 'light' ? 'dark' : 'light');
        }

        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll('.theme-color').forEach(btn => {
                btn.addEventListener('click', function () {
                    const theme = this.getAttribute('data-theme');
                    setTheme(theme);
                });
            });
            setTheme(localStorage.getItem('theme') || 'dark');
        });

        // --- Custom Links with icons and descriptions ---
        const customLinks = [
            { title: "2048", url: "https://play2048.co/", icon: "https://play2048.co/favicon.ico", desc: "Classic tile merging puzzle game." },
            { title: "Cookie Clicker", url: "https://orteil.dashnet.org/cookieclicker/", icon: "https://orteil.dashnet.org/favicon.ico", desc: "Addictive incremental cookie game." },
            { title: "Slither.io", url: "https://slither.io/", icon: "https://slither.io/favicon.ico", desc: "Multiplayer snake game." },
            { title: "Agar.io", url: "https://agar.io/", icon: "https://agar.io/favicon.ico", desc: "Eat cells and grow in this classic .io game." },
            { title: "Tetris", url: "https://tetris.com/play-tetris", icon: "https://tetris.com/favicon.ico", desc: "The original falling blocks game." },
            { title: "Plane", url: "https://assets.3kh0.net/papery-planes/index.html", icon: "https://assets.3kh0.net/papery-planes/favicon.ico", desc: "Fly your paper plane!" },
            { title: "MultiTask", url: "https://utopiaweb.org/gams/gfiles/flash/?swf=multitask.swf", icon: "https://www.google.com/s2/favicons?domain=utopiaweb.org", desc: "Test your multitasking skills." },
            { title: "Good Slope", url: "https://utopiaweb.org/gams/gfiles/html5/slope/", icon: "https://www.google.com/s2/favicons?domain=utopiaweb.org", desc: "Roll down the slope and survive!" },
            { title: "Five Nights At Wintons", url: "https://g.deev.is/fnaw/", icon: "https://www.google.com/s2/favicons?domain=g.deev.is", desc: "A FNAF parody game." },
            { title: "Flappy Bird", url: "https://flappybird.io/", icon: "https://flappybird.io/favicon.ico", desc: "The classic flappy bird game." },
            { title: "Blooket Bot(may not work)", url: "https://blooketbot.glitch.me/", icon: "https://blooketbot.glitch.me/favicon.ico", desc: "Blooket bot tool." },
            { title: "Minecraft", url: "https://mcraft.fun/", icon: "https://mcraft.fun/favicon.ico", desc: "Minecraft in your browser." },
            { title: "Happy Wheels", url: "https://files.crazygames.com/ruffle/happywheels.html", icon: "https://files.crazygames.com/ruffle/favicon.ico", desc: "Play Happy Wheels online." },
            { title: "Duck Life 4", url: "https://utopiaweb.org/gams/gfiles/flash/?swf=ducklife4.swf", icon: "https://www.google.com/s2/favicons?domain=utopiaweb.org", desc: "Train your duck and race!" },
            { title: "Learn to Fly 3", url: "https://flashmuseum.org/learn-to-fly-3/", desc: "Learn to Fly 3!" },
            { title: "Monkey Mart", url: "https://monkeymartgame.org/", icon: "https://monkeymartgame.org/favicon.ico", desc: "Run your own monkey mart!" }
        ];

        // --- Alphabetical sorting ---
        customLinks.sort((a, b) => a.title.localeCompare(b.title));

        // --- Favorites & Recently Used ---
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
        let recent = JSON.parse(localStorage.getItem('recent') || '[]');
        let pinned = JSON.parse(localStorage.getItem('pinned') || '[]');

        function addToFavorites(linkObj) {
            if (!favorites.some(f => f.url === linkObj.url)) {
                favorites.push(linkObj);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                renderFavorites();
            }
        }
        function addToRecent(linkObj) {
            recent = recent.filter(r => r.url !== linkObj.url);
            recent.unshift(linkObj);
            if (recent.length > 8) recent = recent.slice(0, 8);
            localStorage.setItem('recent', JSON.stringify(recent));
            renderRecent();
        }
        function addToPinned(linkObj) {
            if (!pinned.some(p => p.url === linkObj.url)) {
                pinned.push(linkObj);
                localStorage.setItem('pinned', JSON.stringify(pinned));
                renderPinned();
            }
        }
        function removeFromPinned(linkObj) {
            pinned = pinned.filter(p => p.url !== linkObj.url);
            localStorage.setItem('pinned', JSON.stringify(pinned));
            renderPinned();
        }
        function renderFavorites() {
            const favList = document.getElementById('favoritesList');
            favList.innerHTML = '';
            favorites.forEach(linkObj => {
                const li = document.createElement('li');
                li.style.display = 'flex';
                li.style.alignItems = 'center';
                li.style.margin = '0';
                li.style.padding = '0';
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = linkObj.title + " ‚òÖ";
                btn.style.background = 'var(--btn-bg)';
                btn.style.color = '#fff';
                btn.style.fontWeight = 'bold';
                btn.style.fontSize = '0.95em';
                btn.style.border = 'none';
                btn.style.borderRadius = '999px';
                btn.style.padding = '6px 14px';
                btn.style.margin = '0';
                btn.style.cursor = 'pointer';
                btn.style.boxShadow = '0 2px 8px 0 rgba(40,40,60,0.10), 0 1px 0 0 var(--accent2) inset';
                btn.onclick = function(e) {
                    e.preventDefault();
                    openInAboutBlank(linkObj.url);
                    addToRecent(linkObj);
                };
                // Remove from favorites button
                const rm = document.createElement('span');
                rm.textContent = "‚úñ";
                rm.title = "Remove";
                rm.style.marginLeft = "6px";
                rm.style.cursor = "pointer";
                rm.style.color = "#ff4f4f";
                rm.onclick = function(ev) {
                    ev.stopPropagation();
                    favorites = favorites.filter(f => f.url !== linkObj.url);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                    renderFavorites();
                };
                li.appendChild(btn);
                li.appendChild(rm);
                favList.appendChild(li);
            });
        }
        function renderRecent() {
            const recList = document.getElementById('recentList');
            recList.innerHTML = '';
            recent.forEach(linkObj => {
                const li = document.createElement('li');
                li.style.display = 'flex';
                li.style.alignItems = 'center';
                li.style.margin = '0';
                li.style.padding = '0';
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = linkObj.title;
                btn.style.background = 'var(--btn-bg)';
                btn.style.color = '#fff';
                btn.style.fontWeight = 'bold';
                btn.style.fontSize = '0.95em';
                btn.style.border = 'none';
                btn.style.borderRadius = '999px';
                btn.style.padding = '6px 14px';
                btn.style.margin = '0';
                btn.style.cursor = 'pointer';
                btn.style.boxShadow = '0 2px 8px 0 rgba(40,40,60,0.10), 0 1px 0 0 var(--accent2) inset';
                btn.onclick = function(e) {
                    e.preventDefault();
                    openInAboutBlank(linkObj.url);
                    addToRecent(linkObj);
                };
                li.appendChild(btn);
                recList.appendChild(li);
            });
        }
        function renderPinned() {
            const pinList = document.getElementById('pinnedList');
            pinList.innerHTML = '';
            pinned.forEach(linkObj => {
                const li = document.createElement('li');
                li.style.display = 'flex';
                li.style.alignItems = 'center';
                li.style.margin = '0';
                li.style.padding = '0';
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.textContent = linkObj.title + " üìå";
                btn.style.background = 'var(--btn-bg)';
                btn.style.color = '#fff';
                btn.style.fontWeight = 'bold';
                btn.style.fontSize = '0.95em';
                btn.style.border = 'none';
                btn.style.borderRadius = '999px';
                btn.style.padding = '6px 14px';
                btn.style.margin = '0';
                btn.style.cursor = 'pointer';
                btn.style.boxShadow = '0 2px 8px 0 rgba(40,40,60,0.10), 0 1px 0 0 var(--accent2) inset';
                btn.onclick = function(e) {
                    e.preventDefault();
                    openInAboutBlank(linkObj.url);
                    addToRecent(linkObj);
                };
                // Remove from pinned button
                const rm = document.createElement('span');
                rm.textContent = "‚úñ";
                rm.title = "Unpin";
                rm.style.marginLeft = "6px";
                rm.style.cursor = "pointer";
                rm.style.color = "#ff4f4f";
                rm.onclick = function(ev) {
                    ev.stopPropagation();
                    removeFromPinned(linkObj);
                };
                li.appendChild(btn);
                li.appendChild(rm);
                pinList.appendChild(li);
            });
        }

        // --- Render Custom Links with icon, description, status, favorite, double-click ---
        let searchQuery = "";

        function renderCustomLinks() {
            const list = document.getElementById('customLinksList');
            list.innerHTML = '';
            customLinks
                .filter(linkObj =>
                    linkObj.title.toLowerCase().includes(searchQuery) ||
                    (linkObj.desc && linkObj.desc.toLowerCase().includes(searchQuery))
                )
                .forEach(linkObj => {
                    const li = document.createElement('li');
                    li.style.display = 'flex';
                    li.style.justifyContent = 'center';
                    li.style.alignItems = 'center';
                    li.style.margin = '0';
                    li.style.padding = '0';

                    // Status dot
                    const statusDot = document.createElement('span');
                    statusDot.style.display = 'inline-block';
                    statusDot.style.width = '12px';
                    statusDot.style.height = '12px';
                    statusDot.style.borderRadius = '50%';
                    statusDot.style.marginRight = '8px';
                    statusDot.style.background = '#aaa';
                    statusDot.title = "Checking link...";

                    // Game icon
                    const icon = document.createElement('img');
                    icon.src = linkObj.icon || 'https://www.google.com/s2/favicons?domain=' + encodeURIComponent(linkObj.url);
                    icon.alt = '';
                    icon.style.width = '18px';
                    icon.style.height = '18px';
                    icon.style.borderRadius = '4px';
                    icon.style.marginRight = '7px';
                    icon.style.background = '#232946';

                    // Bubble button
                    const nameBtn = document.createElement('button');
                    nameBtn.type = 'button';
                    nameBtn.textContent = linkObj.title;
                    nameBtn.style.background = 'var(--btn-bg)';
                    nameBtn.style.color = '#fff';
                    nameBtn.style.fontWeight = 'bold';
                    nameBtn.style.fontSize = '0.98em';
                    nameBtn.style.border = 'none';
                    nameBtn.style.borderRadius = '999px';
                    nameBtn.style.padding = '7px 18px';
                    nameBtn.style.margin = '0';
                    nameBtn.style.cursor = 'pointer';
                    nameBtn.style.boxShadow = '0 2px 8px 0 rgba(40,40,60,0.10), 0 1px 0 0 var(--accent2) inset';
                    nameBtn.style.transition = 'background 0.3s, color 0.3s, box-shadow 0.3s, transform 0.18s';
                    nameBtn.title = linkObj.desc || '';
                    nameBtn.onmouseover = function() {
                        nameBtn.style.background = 'var(--btn-hover)';
                        nameBtn.style.transform = 'translateY(-1px) scale(1.03)';
                        nameBtn.style.boxShadow = '0 4px 16px 0 rgba(40,40,60,0.16)';
                    };
                    nameBtn.onmouseout = function() {
                        nameBtn.style.background = 'var(--btn-bg)';
                        nameBtn.style.transform = 'none';
                        nameBtn.style.boxShadow = '0 2px 8px 0 rgba(40,40,60,0.10), 0 1px 0 0 var(--accent2) inset';
                    };
                    nameBtn.onclick = function(e) {
                        e.preventDefault();
                        openInAboutBlank(linkObj.url);
                        addToRecent(linkObj);
                    };
                    nameBtn.ondblclick = function(e) {
                        e.preventDefault();
                        alert(linkObj.desc || "No description available.");
                    };

                    // Favorite star
                    const favStar = document.createElement('span');
                    favStar.textContent = favorites.some(f => f.url === linkObj.url) ? "‚òÖ" : "‚òÜ";
                    favStar.title = "Add to Favorites";
                    favStar.style.marginLeft = "8px";
                    favStar.style.cursor = "pointer";
                    favStar.style.fontSize = "1.1em";
                    favStar.style.color = "#ffd700";
                    favStar.onclick = function(ev) {
                        ev.stopPropagation();
                        addToFavorites(linkObj);
                        renderCustomLinks();
                    };

                    // Pin icon
                    const pinIcon = document.createElement('span');
                    pinIcon.textContent = pinned.some(p => p.url === linkObj.url) ? "üìå" : "üìç";
                    pinIcon.title = pinned.some(p => p.url === linkObj.url) ? "Unpin" : "Pin";
                    pinIcon.style.marginLeft = "8px";
                    pinIcon.style.cursor = "pointer";
                    pinIcon.style.fontSize = "1.1em";
                    pinIcon.style.color = "#7f5af0";
                    pinIcon.onclick = function(ev) {
                        ev.stopPropagation();
                        if (pinned.some(p => p.url === linkObj.url)) {
                            removeFromPinned(linkObj);
                        } else {
                            addToPinned(linkObj);
                        }
                        renderCustomLinks();
                    };

                    li.appendChild(statusDot);
                    li.appendChild(icon);
                    li.appendChild(nameBtn);
                    li.appendChild(favStar);
                    li.appendChild(pinIcon);

                    // Link validation (show faded if unreachable, dot for status)
                    fetch(linkObj.url, { method: 'HEAD', mode: 'no-cors' })
                        .then(() => {
                            nameBtn.style.opacity = "1";
                            nameBtn.title = linkObj.desc || "";
                            statusDot.style.background = "#2cb67d";
                        })
                        .catch(() => {
                            nameBtn.style.opacity = "0.5";
                            nameBtn.title = "Link may be down!";
                            statusDot.style.background = "#ff4f4f";
                        });

                    list.appendChild(li);
                });
        }

        // --- Random Game Button ---
        document.getElementById('randomGameBtn').onclick = function() {
            if (!customLinks.length) return;
            const idx = Math.floor(Math.random() * customLinks.length);
            openInAboutBlank(customLinks[idx].url);
            addToRecent(customLinks[idx]);
        };

        // --- Changelog Modal Logic ---
        document.getElementById('changelogBtn').onclick = function() {
            document.getElementById('changelogModal').style.display = 'flex';
        };

        // --- Instructions Modal Logic ---
        document.getElementById('instructionsBtn').onclick = function() {
            document.getElementById('instructionsModal').style.display = 'flex';
        };

        // --- FAQ Modal Logic ---
        document.getElementById('faqBtn').onclick = function() {
            document.getElementById('faqModal').style.display = 'flex';
        };

        // --- Initial Render (after password accepted) ---
        window.onload = function () {
            // Password prompt and UI show logic
            const PASSWORD = "yourag";
            var userPassword = prompt("Enter the password to access this page:");
            if (userPassword !== PASSWORD) {
                alert("Incorrect password.");
                document.body.innerHTML = "<h2 style='color:#ff4f4f;text-align:center;margin-top:60px;'>Access Denied</h2>";
                return;
            }
            // Show the unblocker UI
            document.querySelector('label[for="gameUrl"]').style.display = '';
            const gameUrlInput = document.getElementById('gameUrl');
            gameUrlInput.style.display = '';
            gameUrlInput.addEventListener('keydown', function(e) {
                if (e.key === "Enter") {
                    openGame();
                }
            });
            document.getElementById('btn1').style.display = '';
            document.getElementById('btn2').style.display = '';
            document.getElementById('btn3').style.display = '';
            document.getElementById('btn4').style.display = '';
            document.getElementById('btn5').style.display = '';

            renderPinned();
            renderFavorites();
            renderRecent();
            renderCustomLinks();
        };

        document.getElementById('searchBar').addEventListener('input', function() {
            searchQuery = this.value.trim().toLowerCase();
            renderCustomLinks();
        });
        document.getElementById('aiToolsDropdown').addEventListener('change', function() {
    if (this.value) {
        openInAboutBlank(this.value); // Use your cloaked function instead of window.open
        this.selectedIndex = 0;
    }
});
    </script>
</body>
</html>
